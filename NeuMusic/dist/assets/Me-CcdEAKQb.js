import{a as o,u as a,b as s,g as V,s as A,x as B,e as u,y as E,d as c,t as d,F as m,f as k,p as F,h as n}from"./vendor-DY0UzM5c.js";import{_ as R,u as $,b as q,c as b}from"./index-h1JUByrL.js";import"./utils-DOv6pLCg.js";const G={class:"me-page page-container"},Y={key:0,class:"not-logged-in"},j={class:"login-prompt"},z={class:"login-actions"},H={key:1,class:"user-profile"},J={class:"profile-header"},K={class:"user-info"},O={class:"user-avatar-container"},Q=["src","alt"],W={key:1,class:"default-avatar"},X={class:"user-details"},Z={key:0},ss={key:1,class:"user-signature"},ts={class:"user-stats"},ls={class:"stat-item"},as={class:"stat-item"},os={class:"stat-item"},ns={class:"user-content"},es={class:"content-section"},is={class:"section-header"},rs={key:0,class:"empty-state"},ds={key:1,class:"playlist-grid"},us=["onClick"],cs={class:"playlist-cover"},fs=["src","alt"],vs={class:"playlist-info"},ps={class:"playlist-meta"},gs={class:"creation-time"},ys={class:"content-section"},ms={class:"section-header"},ks={key:0,class:"empty-state"},bs={key:1,class:"playlist-grid"},hs=["onClick"],_s={class:"playlist-cover"},ws=["src","alt"],Cs={class:"playlist-info"},Ps={class:"playlist-meta"},Is={class:"subscriber-count"},Ss={__name:"Me",setup(Ds){const f=F(),l=$(),e=q(),h=()=>{f.push("/")},_=async()=>{try{e.setLoading(!0),await Promise.all([l.fetchUserDetail(),l.fetchUserPlaylists(),l.fetchLikeList()]),e.showSuccess("刷新成功")}catch{e.showError("刷新失败")}finally{e.setLoading(!1)}},w=async()=>{try{e.setLoading(!0),await l.logout(),e.showSuccess("已退出登录"),f.push("/")}catch{e.showError("退出登录失败")}finally{e.setLoading(!1)}},p=r=>{e.showPlaylistModal(r.id)},C=()=>{e.showInfo("最近播放功能即将上线")},P=()=>{e.showInfo("我喜欢的音乐功能即将上线")},I=()=>{e.showInfo("下载管理功能即将上线")},S=()=>{e.showInfo("本地音乐功能即将上线")},D=()=>{e.showInfo("创建歌单功能即将上线")},L=()=>{f.push("/discover")},U=()=>{e.showInfo("查看全部歌单功能即将上线")},M=()=>{e.showInfo("查看全部歌单功能即将上线")},T=r=>{const t=new Date(r);return t.getFullYear()+"年"+(t.getMonth()+1)+"月"},x=r=>r>1e5?Math.floor(r/1e4)+"万":r>1e3?Math.floor(r/1e3)+"千":r.toString();return(r,t)=>{var g,y;const N=E("router-link");return n(),o("div",G,[a(l).isLoggedIn?(n(),o("div",H,[s("div",J,[t[10]||(t[10]=s("h1",null,"我的音乐",-1)),s("div",K,[s("div",O,[a(l).avatarUrl?(n(),o("img",{key:0,src:a(l).avatarUrl,alt:a(l).nickname,class:"user-avatar-large"},null,8,Q)):(n(),o("div",W,[...t[6]||(t[6]=[s("i",{class:"fas fa-user"},null,-1)])]))]),s("div",X,[s("h2",null,d(a(l).nickname||"用户"),1),a(l).userId?(n(),o("p",Z,"用户ID: "+d(a(l).userId),1)):c("",!0),(y=(g=a(l).userDetail)==null?void 0:g.profile)!=null&&y.signature?(n(),o("p",ss,d(a(l).userDetail.profile.signature),1)):c("",!0),t[7]||(t[7]=s("div",{class:"user-badges"},[s("span",{class:"badge online"},[s("i",{class:"fas fa-circle"}),u(" 在线 ")])],-1))]),s("div",{class:"profile-actions"},[s("button",{class:"neu-button",onClick:_},[...t[8]||(t[8]=[s("i",{class:"fas fa-sync-alt"},null,-1),u(" 刷新 ",-1)])]),s("button",{class:"neu-button",onClick:w},[...t[9]||(t[9]=[s("i",{class:"fas fa-sign-out-alt"},null,-1),u(" 退出 ",-1)])])])])]),s("div",ts,[s("div",ls,[s("h3",null,d(a(l).createdPlaylists.length),1),t[11]||(t[11]=s("p",null,"创建的歌单",-1)),t[12]||(t[12]=s("i",{class:"fas fa-plus-circle"},null,-1))]),s("div",as,[s("h3",null,d(a(l).subscribedPlaylists.length),1),t[13]||(t[13]=s("p",null,"收藏的歌单",-1)),t[14]||(t[14]=s("i",{class:"fas fa-heart-circle"},null,-1))]),s("div",os,[s("h3",null,d(a(l).likedSongs.length),1),t[15]||(t[15]=s("p",null,"喜欢的音乐",-1)),t[16]||(t[16]=s("i",{class:"fas fa-music"},null,-1))])]),s("div",ns,[s("div",{class:"quick-actions"},[t[21]||(t[21]=s("h3",null,"快捷操作",-1)),s("div",{class:"action-grid"},[s("div",{class:"action-item neu-card",onClick:C},[...t[17]||(t[17]=[s("i",{class:"fas fa-history"},null,-1),s("span",null,"最近播放",-1)])]),s("div",{class:"action-item neu-card",onClick:P},[...t[18]||(t[18]=[s("i",{class:"fas fa-heart"},null,-1),s("span",null,"我喜欢的音乐",-1)])]),s("div",{class:"action-item neu-card",onClick:I},[...t[19]||(t[19]=[s("i",{class:"fas fa-download"},null,-1),s("span",null,"下载管理",-1)])]),s("div",{class:"action-item neu-card",onClick:S},[...t[20]||(t[20]=[s("i",{class:"fas fa-folder-music"},null,-1),s("span",null,"本地音乐",-1)])])])]),s("div",es,[s("div",is,[t[22]||(t[22]=s("h3",null,"创建的歌单",-1)),a(l).createdPlaylists.length>6?(n(),o("button",{key:0,class:"view-all-btn neu-button",onClick:U}," 查看全部 ")):c("",!0)]),a(l).createdPlaylists.length===0?(n(),o("div",rs,[t[24]||(t[24]=s("i",{class:"fas fa-folder-plus"},null,-1)),t[25]||(t[25]=s("p",null,"还没有创建任何歌单",-1)),s("button",{class:"neu-button primary",onClick:D},[...t[23]||(t[23]=[s("i",{class:"fas fa-plus"},null,-1),u(" 创建歌单 ",-1)])])])):(n(),o("div",ds,[(n(!0),o(m,null,k(a(l).createdPlaylists.slice(0,6),i=>(n(),o("div",{key:i.id,class:"playlist-card neu-card",onClick:v=>p(i)},[s("div",cs,[s("img",{src:a(b).getImageUrl(i.coverImgUrl,200),alt:i.name},null,8,fs),t[26]||(t[26]=s("div",{class:"playlist-overlay"},[s("i",{class:"fas fa-play"})],-1))]),s("div",vs,[s("h4",null,d(i.name),1),s("p",null,d(i.trackCount)+" 首歌曲",1),s("div",ps,[s("span",gs,"创建于 "+d(T(i.createTime)),1)])])],8,us))),128))]))]),s("div",ys,[s("div",ms,[t[27]||(t[27]=s("h3",null,"收藏的歌单",-1)),a(l).subscribedPlaylists.length>6?(n(),o("button",{key:0,class:"view-all-btn neu-button",onClick:M}," 查看全部 ")):c("",!0)]),a(l).subscribedPlaylists.length===0?(n(),o("div",ks,[t[29]||(t[29]=s("i",{class:"fas fa-heart"},null,-1)),t[30]||(t[30]=s("p",null,"还没有收藏任何歌单",-1)),s("button",{class:"neu-button",onClick:L},[...t[28]||(t[28]=[s("i",{class:"fas fa-compass"},null,-1),u(" 去发现音乐 ",-1)])])])):(n(),o("div",bs,[(n(!0),o(m,null,k(a(l).subscribedPlaylists.slice(0,6),i=>{var v;return n(),o("div",{key:i.id,class:"playlist-card neu-card",onClick:Ls=>p(i)},[s("div",_s,[s("img",{src:a(b).getImageUrl(i.coverImgUrl,200),alt:i.name},null,8,ws),t[31]||(t[31]=s("div",{class:"playlist-overlay"},[s("i",{class:"fas fa-play"})],-1))]),s("div",Cs,[s("h4",null,d(i.name),1),s("p",null,"by "+d((v=i.creator)==null?void 0:v.nickname),1),s("div",Ps,[s("span",Is,d(x(i.subscribedCount))+" 人收藏",1)])])],8,hs)}),128))]))])])])):(n(),o("div",Y,[s("div",j,[t[2]||(t[2]=s("i",{class:"fas fa-user-circle"},null,-1)),t[3]||(t[3]=s("h2",null,"享受更多音乐体验",-1)),t[4]||(t[4]=s("p",null,"登录后即可同步歌单、收藏音乐、获取个性化推荐",-1)),s("div",z,[A(N,{to:"/login",class:"neu-button primary"},{default:B(()=>[...t[0]||(t[0]=[s("i",{class:"fas fa-sign-in-alt"},null,-1),u(" 立即登录 ",-1)])]),_:1}),s("button",{class:"neu-button",onClick:h},[...t[1]||(t[1]=[s("i",{class:"fas fa-eye"},null,-1),u(" 继续浏览 ",-1)])])]),t[5]||(t[5]=V('<div class="guest-features" data-v-8de75257><h3 data-v-8de75257>游客模式也可以：</h3><ul data-v-8de75257><li data-v-8de75257><i class="fas fa-search" data-v-8de75257></i> 搜索音乐和歌手</li><li data-v-8de75257><i class="fas fa-play" data-v-8de75257></i> 播放部分歌曲</li><li data-v-8de75257><i class="fas fa-compass" data-v-8de75257></i> 浏览热门内容</li><li data-v-8de75257><i class="fas fa-list" data-v-8de75257></i> 查看排行榜</li></ul></div>',1))])]))])}}},xs=R(Ss,[["__scopeId","data-v-8de75257"]]);export{xs as default};
